!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.zxdom={})}(this,function(e){"use strict";function t(e,t,...n){return t=t||{},n=[].concat(...[].concat(...n)).filter(e=>!1!==e&&null!=e),"function"==typeof e?e(t,n):{type:e,attributes:t,children:n}}function n(e,c){return e.func?n(t(e)):e.type?(e.type.func?function({type:e,attributes:t,children:c}){const i=u(e,t,c),r=n(i);return e.instances=e.instances||[],e.instances.push({el:r,vnode:i,attributes:t,children:c}),r}:function({type:e,attributes:t,children:c},i=!1){const r=(i=i||"svg"===e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return d(r,{},t),c.forEach(e=>r.appendChild(n(e,i))),r})(e,c):document.createTextNode(e)}function c(e,t,u){return e=t.type&&t.type===u.type?t.type.func?r(e,u.type,u.attributes,u.children):function(e,t,i,r,u){return d(e,t,r),function(e,t,i){t=t.slice();let r=0;for(;r<t.length&&r<i.length;){let u=o(t,i[r],r);u<0?(e.insertBefore(n(i[r]),e.childNodes[r]),t.splice(r,0,"")):(u!=r&&(e.insertBefore(e.childNodes[u],e.childNodes[r]),t.splice(r,0,t.splice(u,1)[0])),c(e.childNodes[r],t[r],i[r])),r++}for(;r<t.length;)e.removeChild(e.childNodes[r]),t.splice(r,1);for(;r<i.length;)e.appendChild(n(i[r++]))}(e,i,u),e}(e,t.attributes,t.children,u.attributes,u.children):i(e,u)}function i(e,t){const c=n(t);return e.parentNode&&e.parentNode.replaceChild(c,e),c}function r(e,t,n,r){function o(e){const t=e.attributes;return t&&t.key?t.key:null}const s=u(t,n,r),d=a(t.instances,t=>t.el===e),l=t.instances[d].vnode,f=o(l)===o(s)?c(e,l,s):i(e,s);return t.instances.splice(d,1,{el:f,vnode:s,attributes:n,children:r}),f}function u(e,t,n){return e.func(Object.assign({},t,e.data),n)}function o(e,t,n){const c=s(t);return a(e,e=>s(e)===c,n)}function s(e){return e.type?e.attributes.key||e.type:e}function d(e,t,n){Object.keys(t).forEach(t=>{null==n[t]&&l(e,t)}),Object.keys(n).forEach(c=>{l(e,c,t[c],n[c])})}function l(e,t,n,c){"key"===t||"value"===t||"checked"===t||"on"===t.substr(0,2)?e[t]=c:null==c||!1===c?e.removeAttribute(t):n!==c&&e.setAttribute(t,c)}function a(e,t,n=0){return e.reduce((e,c,i)=>i<n||e>-1||!t(c)?e:i,-1)}e.h=t,e.patch=c,e.make=n,e.mount=function(e,t){const c=n(e);return t.innerHTML="",t.appendChild(c),c},e.define=function(e,t){return{func:e,data:t}},e.update=function(e,t){e.data=t,e.instances=e.instances||[],e.instances.forEach(t=>r(t.el,e,t.attributes,t.children))},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=zxdom.js.map