!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.zxdom={})}(this,function(e){"use strict";function t(e,t,n=0){return e.reduce((e,c,i)=>i<n||e>-1||!t(c)?e:i,-1)}function n(e,t,n,c){"key"===t||"value"===t||"on"===t.substr(0,2)?e[t]=c:null==c||!1===c?e.removeAttribute(t):n!==c&&e.setAttribute(t,c)}function c(e,t,c){Object.keys(t).forEach(t=>{null==c[t]&&n(e,t)}),Object.keys(c).forEach(i=>{n(e,i,t[i],c[i])})}function i(e,t){if(t.type){const{type:n,attributes:c,children:r}=t;if(n.func){const t=l(n,e);i(e,n.instances[t].vnode),n.instances.splice(t,1)}else r.forEach((t,n)=>i(e.childNodes[n],t)),c.onremove&&c.onremove(e)}}function r(e){const t=e.attributes;return t&&t.key?t.key:null}function o(e,t,n,c){const i=t.func(Object.assign({},n,t.data),c),o=l(t,e),u=t.instances[o].vnode,s=(r(u)===r(i)?f:d)(e,u,i);return t.instances.splice(o,1,{el:s,vnode:i,attributes:n,children:c}),s}function u(e){return e.type?e.attributes.key||e.type:e}function s(e,n,c){const i=u(n);return t(e,e=>u(e)===i,c)}function a(e,t,n,r,o){return c(e,t,r),function(e,t,n){let c=0;for(;c<t.length&&c<n.length;){let i=s(t,n[c],c);i<0?(e.insertBefore(h(n[c]),e.childNodes[c]),t.splice(c,0,"")):(i!=c&&(e.insertBefore(e.childNodes[i],e.childNodes[c]),t.splice(c,0,t.splice(i,1)[0])),f(e.childNodes[c],t[c],n[c])),c++}for(;c<t.length;)r=e.childNodes[c],o=t[c],i(r,o),r.parentNode&&r.parentNode.removeChild(r),t.splice(c,1);for(var r,o;c<n.length;)e.appendChild(h(n[c++]))}(e,n,o),r.onupdate&&r.onupdate(e),e}function d(e,t,n){i(e,t);const c=h(n);return e.parentNode&&e.parentNode.replaceChild(c,e),c}function f(e,t,n){return(t.type&&t.type===n.type?function(e,t,{type:n,attributes:c,children:i}){return n.func?o(e,n,c,i):a(e,t.attributes,t.children,c,i)}:d)(e,t,n)}function l(e,n){return t(e.instances,e=>e.el===n)}function p({type:e,attributes:t={},children:n=[]},i=!1){if(e.func)return function(e,t,n){const c=e.func(Object.assign({},t,e.data),n),i=h(c);return e.instances=e.instances||[],e.instances.push({el:i,vnode:c,attributes:t,children:n}),i}(e,t,n);const r=(i=i||"svg"===e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return c(r,{},t),n.forEach(e=>r.appendChild(h(e,i))),t.oncreate&&t.oncreate(r),r}function h(e,t){return e.type?p(e,t):document.createTextNode(e)}function y(e,t,...n){return t=t||{},n=[].concat(...[].concat(...n)).filter(e=>!1!==e&&null!=e),"function"==typeof e?e(t,n):{type:e,attributes:t,children:n}}e.h=y,e.patch=f,e.make=h,e.mount=function(e,t){const n=h(e.func?y(e):e);t.innerHTML="",t.appendChild(n)},e.define=function(e,t){return{func:e,data:t}},e.update=function(e,t){e.data=t,e.instances=e.instances||[],e.instances.forEach(t=>o(t.el,e,t.attributes,t.children))},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=zxdom.js.map