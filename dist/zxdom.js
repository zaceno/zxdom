!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.zxdom={})}(this,function(e){"use strict";function t(e,t,n=0){return e.reduce((e,c,r)=>r<n||e>-1||!t(c)?e:r,-1)}function n(e,t,n,c){"key"===t||"value"===t||"checked"===t||"on"===t.substr(0,2)?e[t]=c:null==c||!1===c?e.removeAttribute(t):n!==c&&e.setAttribute(t,c)}function c(e,t,c){Object.keys(t).forEach(t=>{null==c[t]&&n(e,t)}),Object.keys(c).forEach(r=>{n(e,r,t[r],c[r])})}function r(e,t){let n=!1;if(t.type){const{type:c,attributes:i,children:o}=t;if(c.func){const t=l(c,e);n=r(e,c.instances[t].vnode),c.instances.splice(t,1)}else o.map((t,n)=>r(e.childNodes[n],t)),i.onremove&&(n=i.onremove(e))}return n}function i(e,t,n){const c=r(e,t),i=h(n);return e.parentNode&&(c?e.parentNode.insertBefore(i,e):e.parentNode.replaceChild(i,e)),i}function o(e){const t=e.attributes;return t&&t.key?t.key:null}function u(e,t,n,c){const r=t.func(Object.assign({},n,t.data),c),u=l(t,e),s=t.instances[u].vnode,a=(o(s)===o(r)?f:i)(e,s,r);return t.instances.splice(u,1,{el:a,vnode:r,attributes:n,children:c}),a}function s(e){return e.type?e.attributes.key||e.type:e}function a(e,n,c){const r=s(n);return t(e,e=>s(e)===r,c)}function d(e,t,n,i,o){return c(e,t,i),function(e,t,n){t=t.slice();let c=0;for(;c<t.length&&c<n.length;){let r=a(t,n[c],c);r<0?(e.insertBefore(h(n[c]),e.childNodes[c]),t.splice(c,0,"")):(r!=c&&(e.insertBefore(e.childNodes[r],e.childNodes[c]),t.splice(c,0,t.splice(r,1)[0])),f(e.childNodes[c],t[c],n[c])),c++}for(;c<t.length;)i=e.childNodes[c],o=t[c],!r(i,o)&&(i.parentNode&&i.parentNode.removeChild(i),1)?t.splice(c,1):c++;for(var i,o;c<n.length;)e.appendChild(h(n[c++]))}(e,n,o),i.onupdate&&i.onupdate(e),e}function f(e,t,n){return(t.type&&t.type===n.type?function(e,t,{type:n,attributes:c,children:r}){return n.func?u(e,n,c,r):d(e,t.attributes,t.children,c,r)}:i)(e,t,n)}function l(e,n){return t(e.instances,e=>e.el===n)}function p({type:e,attributes:t={},children:n=[]},r=!1){if(e.func)return function(e,t,n){const c=e.func(Object.assign({},t,e.data),n),r=h(c);return e.instances=e.instances||[],e.instances.push({el:r,vnode:c,attributes:t,children:n}),r}(e,t,n);const i=(r=r||"svg"===e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return c(i,{},t),n.forEach(e=>i.appendChild(h(e,r))),t.oncreate&&t.oncreate(i),i}function h(e,t){return e.func?h(y(e)):e.type?p(e,t):document.createTextNode(e)}function y(e,t,...n){return t=t||{},n=[].concat(...[].concat(...n)).filter(e=>!1!==e&&null!=e),"function"==typeof e?e(t,n):{type:e,attributes:t,children:n}}e.h=y,e.patch=f,e.make=h,e.mount=function(e,t){const n=h(e);return t.innerHTML="",t.appendChild(n),n},e.define=function(e,t){return{func:e,data:t}},e.update=function(e,t){e.data=t,e.instances=e.instances||[],e.instances.forEach(t=>u(t.el,e,t.attributes,t.children))},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=zxdom.js.map